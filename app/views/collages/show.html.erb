<style type="text/css" id="active-layer-style">
  <%= if ! cookies['active-layer-ids'].blank? 
        cookies['active-layer-ids'].split(',').collect{|l| ".l#{l}"}.join(',')
      end %>{
      display: none;
    }
</style>

<% cache("collage-annotable-content-#{@collage.id}") do %>
  <div class="collage-id" id="collage-<%= @collage.id %>">
    <div id="annotatable-content">
      <%= @collage.annotatable_content %>
    </div>
  </div>
<% end %>

<%= link_to 'Edit', edit_collage_path(@collage) %> |
<%= link_to 'Back', collages_path %>

<div id="annotation-tools">
  <% if flash[:notice] %>
    <div class="notice"><%= h flash[:notice] %></div>
  <% end %>

  <h2>Meta</h2>
    <div class="layers">
  <ul>
    <li>Annotations: <%= (@collage.annotations.blank?) ? 0 : @collage.annotations.length %>
      <%= 
      output = ''
      arep = @collage.layer_report
      arep.keys.each do |l|
        output += %Q|<li><span class="c#{l}">| + arep[l][:name] + %Q|</span>#{arep[l][:count]} words, #{arep[l][:annotation_count]} total</li>|
      end
      output
    %>
    </li>
  </ul>
    </div>
  <h2>Hide Layers</h2>
  <div id="view-layer-list" class="layers">
  </div>
  <div class="ajax-error" id="ajax-error-<%= @collage.id %>" style="display: none;"></div>
  <div class="status" id="spinner_block" style="display: none;"><%= image_tag('/images/elements/ajax-loader.gif') %></div>
  <div id="new-annotation-form" style="display: none;"></div>
  <div id="new-annotation-start"></div>
  <div id="new-annotation-end"></div>
  <div id="please-wait" style="display: none;">Please wait. . .</div>
</div>
