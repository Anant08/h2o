<section class="playlists">
	<ul>
		<% @playlist.playlist_items.each_with_index do |item, index| -%>
		  <%= render :partial => 'shared/objects/playlist_item',
		    :locals => { :item => item,
			  :parent_index => '',
			  :index => index,
			  :recursive_level => 0 } %> 
		<% end -%>
	</ul>
</section>

<%= javascript_tag %Q|
jQuery(document).ready(function(){
    jQuery('.item_drag_handle').button({icons: {primary: 'ui-icon-arrowthick-2-n-s'}});

    jQuery(".sortable").sortable({
        handle: '.item_drag_handle',
        axis: 'y',
        helper: sortableCellHelper,
        update: function(event, ui) {
            var container_id = jQuery('#container_id').text();
            var playlist_order = jQuery(".sortable").sortable("serialize");
            jQuery.ajax({
                type: "post",
                dataType: 'json',
                url: '/playlists/' + container_id + '/position_update',
                data: {
                    playlist_order: playlist_order
                }
            });
        }
        }).disableSelection();
   });
| %>
